/* Manuscript via CSS v2.0
 *
 * Manuscript formatting for authors who draft in markdown.
 *
 * This stylesheet imports its companion -core.css logic stylesheet. The core
 * styles enable US letter-dimensioned short-prose narratives. This stylesheet
 * layers on functionality to enable A4-dimensioned documents, plus long-form
 * and both narrative and non-narrative formatting.
 *
 * Why does this exist?
 *
 * Because many of us writers draft in markdown and want a means to present our
 * work professionally, even if still a preliminary work. Additionally, it
 * offers a means to webify a finished manuscript.
 *
 * Copyright (c) Todd Warner <t0dd@protonmail.com>
 * This work is licensed under Attribution 4.0 International. To view a copy
 * of this license, visit http://creativecommons.org/licenses/by/4.0/
 *
 * The class "switches":
 * - 'US' & 'A4': US Letter is the default
 * - 'short' & 'long': a manuscript formatted for short prose is the default.
 * - 'narrative' & 'non-narrative': formatted for narrative prose is the
 *     default.
 *
 * To enable any of these formatting adjustments, just add the relevant
 * "switch" to the class attribute of the <div id="manuscript"> element in the
 * markdown document. 'A4' has one difference; you need to add an @page rule
 * after the CSS import call in the style block of the markdown.
 */

/* CSS layers not universally supported or honored by the various toolchains
 * yet. Commenting out for now. Probably for indefinately.
@layer manuscript {
*/

@import "./_manuscript-core.css";

@page {
    /* The default is already set for US letter.
     * For A4 you need to add this at-page declaration after your imports in
     * your markdown (or HTML) file's <style> block.
@page { size: A4 portrait; margin: 25.4mm; }
     */
}

#manuscript.US {
    /* the default is already set for .US */
}

#manuscript.A4 {
    --m-page-width:  var(--m-page-widthA4);
    --m-page-height: var(--m-page-heightA4);
    --m-page-margin: var(--m-page-marginA4);

    --m-content-width:  calc(var(--m-page-width) - calc(var(--m-page-margin) * 2));
    --m-content-height: calc(var(--m-page-height) - calc(var(--m-page-margin) * 2));
}

#manuscript.narrative {
    /* the default is already set for .narrative */
}

#manuscript.non-narrative {
    --m-font-family: var(--m-font-family-non-narrative);
    --m-font-family-preformatted: var(--m-font-family-non-narrative-preformatted);
    --m-indent: var(--m-indent-non-narrative);
    --m-paragraph-spacing: var(--m-paragraph-spacing-non-narrative);
}

#manuscript.short {
    /* the default is already set for .short */
}

#manuscript.long {
    --m-offset-title: var(--m-offset-title-long);
    --m-offset-parts-and-chapters: var(--m-offset-parts-and-chapters-long);
    --m-offset-parts-and-chapters-render: var(--m-offset-parts-and-chapters-render-long);
    --m-offset-scene: var(--m-offset-scene-long);

    --m-page-break-simulated: var(--m-page-break-simulated-long);
    --m-break-after: unset;

    --m-position-facts:     var(--m-position-facts-long);
    --m-top-facts:          var(--m-top-facts-long);
    --m-bottom-facts:       var(--m-bottom-facts-long);
    --m-left-facts:         var(--m-left-facts-long);
    --m-right-facts:        var(--m-right-facts-long);
    --m-margin-facts:       var(--m-margin-facts-long);
    --m-text-align-facts:   var(--m-text-align-facts-long);
    --m-line-spacing-facts: var(--m-line-spacing-facts-long);
}
@media print {
#manuscript.long {
    /* long-form print behavior:
     * major component page break & position 1/3rd to 5/12th down the page */
    --m-page-break-simulated: 0;
    --m-page-break: var(--m-page-break-long);
}
} /* /print */

/* layers not universally supported by the various toolchains, sadly
}*/ /* end @layer manuscript */
