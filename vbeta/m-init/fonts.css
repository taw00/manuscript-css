/* Baseline font and line-height and color configurations
 *
 * Copyright (c) Todd Warner <t0dd@protonmail.com>
 * This work is licensed under Attribution 4.0 International. To view a copy
 * of this license, visit http://creativecommons.org/licenses/by/4.0/
 */

/*
 * Baseline fonts and line spacing
 * some of this gets refined in m-core/prose.css and m-core/poetry.css
 */
:root {
    font-size: var(--m-font-size);
}

html {
    font-size:   1rem; /* i.e., root-element's font size */
    font-style:  var(--m-font-style);
    font-weight: var(--m-font-weight);
    font-family: var(--m-font-family);
}

#manuscript {
    font-size:   1rem; /* i.e., root-element's font size */
    font-weight: var(--m-font-weight);
    font-family: var(--m-font-family);
    font-style:  var(--m-font-style);
    line-height: var(--m-line-spacing);

    & pre {
        font-size:   var(--m-font-size-preformatted);
        font-weight: var(--m-font-weight-preformatted);
        font-family: var(--m-font-family-preformatted);
        line-height: var(--m-line-spacing-preformatted);
    }
    & code {
        font-size:   var(--m-font-size-code-inline);
        font-weight: var(--m-font-weight-code-inline);
        font-family: var(--m-font-family-code);
    }
    & pre > code {
        font-size:   var(--m-font-size-code);
        font-weight: var(--m-font-weight-code);
        font-family: var(--m-font-family-code);
        line-height: var(--m-line-spacing-code);
    }

    & .m-contact,
    & #m-contact {
        font-size:   var(--m-font-size-contact);
        font-weight: var(--m-font-weight-contact);
        font-family: var(--m-font-family-contact);
        line-height: var(--m-line-spacing-contact);
    }

    & .m-header {
        font-size:   var(--m-font-size-header);
        font-weight: var(--m-font-weight-header);
        font-family: var(--m-font-family-header);
        line-height: var(--m-line-spacing);
        /* the epigraphs */
        & > blockquote {
            font-size:   var(--m-font-size-epigraph);
            font-weight: var(--m-font-weight-epigraph);
            font-family: var(--m-font-family-epigraph);
            font-style:  var(--m-font-style-epigraph);
        }
        & > h1 {                          /* title of the work */
            font-size:   var(--m-font-size-title);
            font-weight: var(--m-font-weight-title);
            font-family: var(--m-font-family-title);
        }
        & > h2 {                       /* subtitle of the work */
            font-size:   var(--m-font-size-subtitle);
            font-weight: var(--m-font-weight-subtitle);
            font-family: var(--m-font-family-subtitle);
        }
        & > h3 {                         /* author of the work */
            font-size:   var(--m-font-size-byline);
            font-weight: var(--m-font-weight-byline);
            font-family: var(--m-font-family-byline);
        }
    }
    & section:is(.m-part, .m-chapter, .m-scene) > .m-header {
        font-size:   var(--m-font-size-headers);
        font-weight: var(--m-font-weight-headers);
        font-family: var(--m-font-family-headers);
    }

    & > .m-facts,
    & :not(section) .m-facts {
        font-size:   var(--m-font-size-facts);
        font-weight: var(--m-font-weight-facts);
        font-family: var(--m-font-family-facts);
        line-height: var(--m-line-spacing-facts);
    }
    & section:is(.m-chapter,.m-scene) .m-facts {
        font-size:   inherit;
        font-weight: inherit;
        font-family: inherit;
        line-height: inherit;
    }

    & section.m-part {
        & > .m-header {
            & > h1 {              /* title: part */
                font-size:   var(--m-font-size-title-part);
                font-weight: var(--m-font-weight-title-part);
                font-family: var(--m-font-family-title-part);
            }
            & > h2 {              /* subtitle: part */
                font-size:   var(--m-font-size-subtitle-part);
                font-weight: var(--m-font-weight-subtitle-part);
                font-family: var(--m-font-family-subtitle-part);
            }
            & > h3 {              /* subtitle: part */
                font-size:   var(--m-font-size-byline-part);
                font-weight: var(--m-font-weight-byline-part);
                font-family: var(--m-font-family-byline-part);
            }
        }
    }

    & section.m-chapter {
        & > .m-header {
            & > h1 {        /* title: chapter */
                font-size:   var(--m-font-size-title-chapter);
                font-weight: var(--m-font-weight-title-chapter);
                font-family: var(--m-font-family-title-chapter);
            }
            & > h2 {        /* subtitle: chapter */
                font-size:   var(--m-font-size-subtitle-chapter);
                font-weight: var(--m-font-weight-subtitle-chapter);
                font-family: var(--m-font-family-subtitle-chapter);
            }
            & > h3 {        /* author: chapter */
                font-size:   var(--m-font-size-byline-chapter);
                font-weight: var(--m-font-weight-byline-chapter);
                font-family: var(--m-font-family-byline-chapter);
            }
        }
    }

    & section:is(.m-poem) > .m-header, /* poem section */
    & div:is(.x-poem) > .m-header {    /* arbitrary poem */
        line-height: var(--m-line-spacing-poetry);
        & blockquote, & p {
            line-height: var(--m-line-spacing-poetry);
        }
        & > h1 {         /* title: poem*/
            font-size:   var(--m-font-size-title-poem);
            font-weight: var(--m-font-weight-title-poem);
            font-family: var(--m-font-family-title-poem);
            line-height: var(--m-line-spacing-poetry);
            text-transform: var(--m-text-transform-title-poetry);
        }
        & > h2 {         /* subtitle: poem */
            font-size:   var(--m-font-size-subtitle-poem);
            font-weight: var(--m-font-weight-subtitle-poem);
            font-family: var(--m-font-family-subtitle-poem);
            line-height: var(--m-line-spacing-poetry);
        }
        & > h3 {         /* author byline: poem */
            font-size:   var(--m-font-size-byline-poem);
            font-weight: var(--m-font-weight-byline-poem);
            font-family: var(--m-font-family-byline-poem);
            line-height: var(--m-line-spacing-poetry);
        }
    }

    /* section.m-scene > .m-header (title header for a Scene) */
    & section:is(.m-scene) > .m-header {
        & > h1 {         /* title: scene or poem*/
            font-size:   var(--m-font-size-title-scene);
            font-weight: var(--m-font-weight-title-scene);
            font-family: var(--m-font-family-title-scene);
        }
        & > h2 {         /* subtitle: scene or poem */
            font-size:   var(--m-font-size-subtitle-scene);
            font-weight: var(--m-font-weight-subtitle-scene);
            font-family: var(--m-font-family-subtitle-scene);
        }
        & > h3 {         /* author byline: scene or poem */
            font-size:   var(--m-font-size-byline-scene);
            font-weight: var(--m-font-weight-byline-scene);
            font-family: var(--m-font-family-byline-scene);
        }
    }

    & section:is(.m-scene) {
        font-family: var(--m-font-family-scene);
        & pre {
            font-family: var(--m-font-family-preformatted-scene);
        }
        & code {
            font-family: var(--m-font-family-code-scene);
        }
        & pre > code {
            font-family: var(--m-font-family-code-scene);
        }
    }

    & :is(section.m-poem, div.x-poem) {
        & pre,
        & pre > code {
            font-size:   var(--m-font-size-poetry);
            font-weight: var(--m-font-weight-poetry);
            font-style:  var(--m-font-style-poetry);
            font-family: var(--m-font-family-poetry);
            line-height: var(--m-line-spacing-poetry);
        }
        .m-header {
            font-family: inherit;
            font-style: inherit;
            font-weight: inherit;
            line-height: var(--m-line-spacing-poetry);
        }
    }

/*
 * #manuscript > *: baseline colors
 * (html, body, and #vpage colors are managed in m-init/page.css)
 */

    color: var(--m-text-color);
    background-color: transparent;

    & a,
    & a:is(:any-link,:link,:active,:visited,:hover) {
        color: var(--m-link-color);
        text-decoration: unset;
        border: unset;
        &:hover {
            color: var(--m-link-hover-color);
        }
    }

    /* link colors for #m-contact and for .m-facts are different */
    & .m-contact,
    & #m-contact,
    &:not(.long) > .m-header > .m-facts {
        a {
            color: var(--m-text-color);
            &:hover {
                color: var(--m-link-color);
            }
        }
    }

    & blockquote {
        color: inherit; background-color: inherit;
    }
    & pre,
    & code,
    & pre > code {
        /* so many markdown tools manipulate these colors. overriding */
        color: inherit; background-color: inherit;
    }
    /* <hr> lines */
    & hr {
        color: var(--m-text-color);
        border-color: var(--m-text-color);
    }

    /*
     * dinkus and -30-
     */
    &::after,
    & > h6,                              /* manually inserted top-level -30- */
    /*& > section:last-of-type::after,*/               /* auto-inserted -30- */
    & section.m-scene::after,                        /* auto-inserted dinkus */
    & section.m-subscenes::before,                   /* auto-inserted dinkus */
    & section.m-subscenes::after,                    /* auto-inserted dinkus */
    & :not(section.m-scene) > h6 {         /* manually ins. between sections */
        font-size:   var(--m-font-size-dinkus-30-);
        font-weight: var(--m-font-weight-dinkus-30-);
        font-family: var(--m-font-family-dinkus-30-);
        line-height: var(--m-line-spacing);
    }

} /* end #manuscript */

