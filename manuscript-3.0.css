/* CSS for Manuscript Formating v3.0
 *
 * Use this CSS to format your markdown-drafted short story or novel into an
 * approximates of industry standard manuscript formatting.
 * This is useful for:
 * - sharing with others in a format they are familiar with
 * - submitting to critique groups in a professional way
 * - post the manuscript-formated doc on the web for review
 * … all without having to port your draft to a word processing document
 *
 * Supported: Manuscripts formated as …
 * - short and long form documents
 * - narrative and nonnarrative prose
 * - prose and poetry
 * - chapters and scenes/poems
 * - US Letter, A4, etc. or print and digital presentation.
 *
 * Copyright (c) Todd Warner <t0dd@protonmail.com>
 * This work is licensed under Attribution 4.0 International. To view a copy
 * of this license, visit http://creativecommons.org/licenses/by/4.0/
 *
 * The div #vpage class "switches":
 * - default: class="US portrait top-right-header"
 *   If there is no classes are set, those are still the default.  
 *   Others available:
 *   - 'plain', 'vplain', 'vvplain' - these simplify the rendering by removing
 *     fancy things.
 *   - 'US', 'USh', 'A4', 'A5', or 'A6' paper sizes
 *   - 'top-left-header', 'top-right-header', 'top-center-header',  
 *     'bottom-left-header', 'bottom-center-header', 'bottom-right-header',  
 *     'no-header' (if you don't want any header)
 *     and when you set a --m-pagination-header variable in your <style> block
 *     it will appear in one of those. You can only use one of those switches.
 *
 * The article #manuscript class "switches":
 * - default: class="short narrative prose"  
 *   If there is no classes are set, those are still the default.  
 *   Others avaiable:
 *   - 'poetry' - if your work is … poetry
 *   - 'long' - if your work is long form
 *   - 'nonnarrative' - for prose, if your work is not a narrative work
 *   - 'simple' or 'text-only' - used to present a simplified version (no
 *     first-page metadata and simulated page breaks and such)
 *
 * <style
 *   @import url("url-or-path/to/the/manuscript.css");
 *   :root {
 *     --m-pagination-header: "MyLastname / My Short Title / " counter(page);
 *   }
 * </style>
 */

@layer lm-reset-joplin-constants, lm-var-constants, lm-var-defaults, lm-var-permutations, lm-var-theme, lm-user-overrides;

@import                url("./v3.0/m-var.css?rev=2025091205v3");
@import              url("./v3.0/m-reset.css?rev=2025091205v3");
@import               url("./v3.0/m-init.css?rev=2025091205v3");
@import               url("./v3.0/m-core.css?rev=2025091205v3");
@import         url("./v3.0/m-pagination.css?rev=2025091205v3");
@import url("./manuscript-user-overrides.css?rev=2025091205v3");

:root {
    --m-version: 3.0;
}


/*
 * Some overriding classes …
 *
 * center-max-content,
 * table-of-contents, .toc - these center based on max-content
 * force-break-before - page-break before the element
 * force-break-after - page-break after the element
 * no-break - do not break before this element
 * no-indent - text-indent unset
 * foothang - this section will be full of hanging indented paragraphs
 */

/* .center-max-content ------------ */
/* .table-of-contents ------------- */
/* .toc --------------------------- */
.center-max-content,
.table-of-contents,
.toc {
    width: max-content !important;
    max-width: 100% !important;
    margin-left: auto !important; margin-right: auto !important;
}


/* .force-break-before ------------ */
.force-break-before {
    break-before: page !important;
}
/* .force-break-after ------------- */
.force-break-after {
    break-after: page !important;
}
/* .no-break ---------------------- */
@media screen {
/* unset the break if called to do so */
#manuscript section:is(.no-break) {
    border-block-start: unset !important;
    padding-block-start: unset !important;
}
}
@media print {
/* unset the break if called to do so */
#manuscript section:is(.no-break) {
    break-before: unset !important;
    break-after: unset !important;
    margin-block-start: revert !important;
    padding-block-start: revert !important;
}
}

/* no-indent ---------------------- */
:is(article,section,div):not(.foothang).no-indent {
    & p,
    & dd,
    & li > p,
    & dd > p,
    & blockquote p {
        text-indent: unset !important;
    }
}

/* foothangs ---------------------- */
/* .m-scene or any other major block with a class .foothang
 * will format the paragraphs as a hanging indent */
#manuscript :is(section,div).foothang p {
    padding-left: var(--m-indent-foothang);
    text-indent: calc(var(--m-indent-foothang) * -1); 
}

