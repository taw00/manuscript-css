/* CSS for Manuscript Formating v3.0
 *
 * poetry stylings
 *
 * Poetry is styled by adding the 'poetry' class value to the
 * 'article#manuscript' entity. By default, it is configured as a short form
 * manuscript. If you wish a 'long' form manuscript, you would add 'long' to that
 * same entity.
 *
 * A prose manuscript is structured as a series of scenes. Crudely, it looks
 * something like this:
 *
 * <div id="vpage"><article id="manuscript" class="poetry">
 * <section class="m-poem">
 * ```plaintext
 * …a poem…
 * ```
 * </section>
 * <section class="m-poem">
 * ```plaintext
 * …a poem…
 * ```
 * </section>
 * </article>
 * </div>
 *
 * Please reference the provided examples.
 *
 * Copyright (c) Todd Warner <t0dd@protonmail.com>
 * This work is licensed under Attribution 4.0 International. To view a copy
 * of this license, visit http://creativecommons.org/licenses/by/4.0/
 */

#manuscript section.m-poem > .m-header > h1 {
    text-transform: uppercase;
}

#manuscript :is(section.m-poem, div.x-poem) {
    pre,
    pre > code {
        white-space: pre-wrap; /* we wrap poetry */
        overflow:    hidden; /* no scroll bars */
        font-size:   var(--m-font-size-poetry);
        font-weight: var(--m-font-weight-poetry);
        font-family: var(--m-font-family-poetry);
        line-height: var(--m-line-spacing-poetry);
    }
}

#manuscript .x-poem {
    margin: 0;
    padding: 0; border: 0;
    pre:not(:last-of-type) {
        margin: 0 0 var(--m-elbow-room);
        padding: 0; border: 0;
    }
}
#manuscript section.m-poem pre:not(:last-of-type) {
    margin-top: 0;
    margin-bottom: var(--m-elbow-room);
}
#manuscript :is(section.m-poem, div.x-poem) pre:last-of-type {
    margin-top: 0;
    margin-bottom: 0;
}

/*
 * Spacing, poetry
 */

/* each poem: small padding at top */
#manuscript section.m-poem {
    padding-top: var(--m-offset-poem);
}

/* poetry content:
 * small margin between poetry content and a poem's title block if it exists */
#manuscript section.m-poem > .m-header + * {
    padding-top: var(--m-elbow-room);
}


/*
 * ERROR IN FORMATING
 */
/* make stuff in a poem section that isn't poem stuff red and wrong */
#manuscript section.m-poem > :not(.m-header) :not(pre,code) {
    color: red !important;
    font-weight: bold;
    text-decoration: line-through;
}
#manuscript section.m-poem .m-header :is(p, h1, h2, h3, h4, h5, h6) {
    text-align: start;
}

